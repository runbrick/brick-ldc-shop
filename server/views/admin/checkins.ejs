<%- include('partials/header') %>

<div class="bg-white rounded-lg shadow-sm p-6">
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-xl font-bold text-gray-800">签到记录</h2>
  </div>

  <div class="overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">用户</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">获得积分</th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">时间</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        <% logs.forEach(log => { %>
        <tr>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">#<%= log.id %></td>
          <td class="px-6 py-4 whitespace-nowrap">
            <div class="flex items-center">
              <% if (log.avatar_url) { %>
                <img class="h-8 w-8 rounded-full mr-3" src="<%= log.avatar_url %>" alt="">
              <% } %>
              <div class="text-sm font-medium text-gray-900"><%= log.username || '未知用户' %></div>
            </div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-green-600 font-medium">+<%= log.points %></td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><%= new Date(log.created_at).toLocaleString() %></td>
        </tr>
        <% }) %>
        <% if (logs.length === 0) { %>
        <tr>
          <td colspan="4" class="px-6 py-4 text-center text-sm text-gray-500">暂无记录</td>
        </tr>
        <% } %>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <% if (pagination.totalPages > 1) { %>
  <div class="flex justify-center mt-6">
    <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
      <% for(let i = 1; i <= pagination.totalPages; i++) { %>
        <a href="?page=<%= i %>" class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 <%= i === pagination.page ? 'z-10 bg-indigo-50 border-indigo-500 text-indigo-600' : '' %>">
          <%= i %>
        </a>
      <% } %>
    </nav>
  </div>
  <% } %>
</div>

<%- include('partials/footer') %>
