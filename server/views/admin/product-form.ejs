<%- include('partials/header', { title: product ? '编辑商品' : '新建商品', user }) %>
<h1 class="text-xl font-bold text-slate-900 mb-6"><%= product ? '编辑商品' : '新建商品' %></h1>
<form method="post" action="<%= product ? '/admin/products/' + product.id : '/admin/products' %>" class="max-w-xl space-y-4">
  <div>
    <label class="block text-slate-700 font-medium mb-1">名称</label>
    <input type="text" name="name" value="<%= product ? product.name : '' %>" required class="border border-slate-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-primary" />
  </div>
  <div>
    <label class="block text-slate-700 font-medium mb-1">说明</label>
    <textarea name="description" rows="3" class="border border-slate-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-primary"><%= product ? (product.description || '') : '' %></textarea>
  </div>
  <div>
    <label class="block text-slate-700 font-medium mb-1">价格（积分）</label>
    <input type="number" name="price" step="0.01" min="0" value="<%= product ? product.price : '' %>" required class="border border-slate-300 rounded-lg px-3 py-2 w-32 focus:ring-2 focus:ring-primary" />
  </div>
  <div>
    <label class="block text-slate-700 font-medium mb-1">库存</label>
    <input type="number" name="stock" min="0" value="<%= product ? product.stock : '0' %>" class="border border-slate-300 rounded-lg px-3 py-2 w-32 focus:ring-2 focus:ring-primary" />
  </div>
  <div>
    <label class="block text-slate-700 font-medium mb-1">排序（大靠前）</label>
    <input type="number" name="sort" value="<%= product ? product.sort : '0' %>" class="border border-slate-300 rounded-lg px-3 py-2 w-32 focus:ring-2 focus:ring-primary" />
  </div>
  <div>
    <label class="block text-slate-700 font-medium mb-1">状态</label>
    <select name="status" class="border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary">
      <option value="1" <%= product && product.status === 1 ? 'selected' : '' %>>上架</option>
      <option value="0" <%= product && product.status === 0 ? 'selected' : '' %>>下架</option>
    </select>
  </div>
  <button type="submit" class="btn-primary">保存</button>
  <a href="/admin/products" class="text-slate-600 hover:underline ml-4 cursor-pointer">取消</a>
</form>
<%- include('partials/footer') %>
