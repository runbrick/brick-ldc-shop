<%- include('partials/header', { title: '设置', user }) %>
<h1 class="text-xl font-bold text-slate-900 mb-6">设置</h1>
<% if (typeof query !== 'undefined' && query.ok === '1') { %>
<div class="bg-green-50 border border-green-200 text-green-800 rounded-lg p-3 mb-6">已保存</div>
<% } %>
<form method="post" action="/admin/settings" enctype="multipart/form-data" class="max-w-xl space-y-6">
  <div>
    <label class="block text-slate-700 font-medium mb-1">商城名称</label>
    <input type="text" name="site_name" value="<%= typeof siteName !== 'undefined' ? siteName : '' %>" placeholder="砖头商城" maxlength="64" class="border border-slate-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-primary" />
    <p class="text-slate-500 text-sm mt-1">用于前台导航栏、页面标题等展示</p>
  </div>
  <div>
    <label class="block text-slate-700 font-medium mb-1">页脚文案（支持 HTML）</label>
    <textarea name="site_footer_text" id="site_footer_text" rows="4" class="border border-slate-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-primary"><%= typeof siteFooterText !== 'undefined' ? siteFooterText : '' %></textarea>
    <p class="text-slate-500 text-sm mt-1">显示在前台页面底部，可填写 HTML 标签如 &lt;a href="..."&gt;链接&lt;/a&gt;</p>
  </div>
  <div>
    <label class="block text-slate-700 font-medium mb-1">网站背景图</label>
    <% if (typeof siteBackground !== 'undefined' && siteBackground) { %>
    <div class="mb-2"><img src="<%= siteBackground %>" alt="背景" class="max-h-24 rounded border border-slate-200" /></div>
    <% } %>
    <input type="file" name="site_background_image" accept="image/*" class="border border-slate-300 rounded-lg px-3 py-2 w-full text-sm" />
    <p class="text-slate-500 text-sm mt-1">上传图片作为整站背景，留空则保持当前背景</p>
  </div>
  <button type="submit" class="btn-primary">保存</button>
</form>
<%- include('partials/footer') %>
