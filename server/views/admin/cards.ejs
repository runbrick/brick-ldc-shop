<%- include('partials/header', { title, user }) %>
<h1 class="text-xl font-bold text-slate-900 mb-2"><%= product.name %></h1>
<p class="text-slate-500 text-sm mb-6">库存：<%= product.stock %></p>
<form method="post" action="/admin/products/<%= product.id %>/cards" class="mb-6">
  <label class="block text-slate-700 font-medium mb-1">批量添加卡密（每行一条）</label>
  <textarea name="content" rows="6" placeholder="卡号&#10;卡密&#10;或 卡号----卡密" class="border border-slate-300 rounded-lg px-3 py-2 w-full font-mono text-sm focus:ring-2 focus:ring-primary"></textarea>
  <button type="submit" class="btn-primary mt-2">添加</button>
</form>
<div class="bg-white rounded-lg border border-slate-200 overflow-hidden">
  <table class="w-full text-left">
    <thead class="bg-slate-50 border-b border-slate-200">
      <tr>
        <th class="px-4 py-3 text-slate-600 font-medium">ID</th>
        <th class="px-4 py-3 text-slate-600 font-medium">卡密</th>
        <th class="px-4 py-3 text-slate-600 font-medium">状态</th>
      </tr>
    </thead>
    <tbody>
      <% (cards || []).forEach(function(c) { %>
      <tr class="border-b border-slate-100">
        <td class="px-4 py-3"><%= c.id %></td>
        <td class="px-4 py-3 font-mono text-sm break-all"><%= c.card_content %></td>
        <td class="px-4 py-3"><%= c.used ? '已售' : '可用' %></td>
      </tr>
      <% }); %>
    </tbody>
  </table>
  <% if (!cards || cards.length === 0) { %>
  <div class="p-12 text-center text-slate-500">暂无卡密，请在上方批量添加</div>
  <% } %>
</div>
<a href="/admin/products" class="inline-block mt-4 text-primary hover:underline cursor-pointer">← 返回商品列表</a>
<%- include('partials/footer') %>
