<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title><%= typeof title !== 'undefined' ? title : (typeof siteName !== 'undefined' && siteName ? siteName : '发卡平台') %></title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              DEFAULT: '#6366F1',
              600: '#4F46E5',
              700: '#4338CA',
              50: '#EEF2FF',
              100: '#E0E7FF'
            },
            accent: '#F472B6'
          }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Nunito', system-ui, -apple-system, sans-serif;
      -webkit-font-smoothing: antialiased;
    }
    :root {
      --primary: #6366F1;
      --primary-soft: #EEF2FF;
      --primary-hover: #4F46E5;
      --accent-cyan: #22D3EE;
      --accent-pink: #FB7185;
      --accent-yellow: #FACC15;
      --bg-page: #F4F4FF;
      --text-primary: #0F172A;
      --text-muted: #4B5563;
      --text-soft: #9CA3AF;
      --border: #E5E7EB;
      --card-bg: #FFFFFF;
    }
    .platform-page {
      min-height: 100vh;
      background:
        radial-gradient(circle at 0% 0%, rgba(129, 140, 248, 0.16) 0, transparent 55%),
        radial-gradient(circle at 100% 20%, rgba(244, 114, 182, 0.18) 0, transparent 55%),
        radial-gradient(circle at 50% 110%, rgba(56, 189, 248, 0.22) 0, transparent 60%),
        var(--bg-page);
      position: relative;
    }
    .platform-page.with-bg {
      background-attachment: fixed;
    }
    .platform-card {
      background: var(--card-bg);
      border: 1px solid rgba(148, 163, 184, 0.28);
      border-radius: 18px;
      box-shadow: 0 4px 18px rgba(15, 23, 42, 0.06);
      transition: box-shadow 0.25s ease, border-color 0.2s ease, transform 0.2s ease;
    }
    .platform-card:hover {
      box-shadow: 0 14px 35px rgba(15, 23, 42, 0.12);
      border-color: rgba(129, 140, 248, 0.55);
      transform: translateY(-2px);
    }
    .platform-nav {
      background: rgba(15, 23, 42, 0.7);
      backdrop-filter: blur(18px);
      border-bottom: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: 0 16px 40px rgba(15, 23, 42, 0.38);
    }
    @supports not (backdrop-filter: blur(12px)) {
      .platform-nav {
        background: rgba(15, 23, 42, 0.96);
      }
    }
    .btn-primary {
      background-image: linear-gradient(90deg, #6366F1, #22D3EE);
      color: #fff;
      padding: 0.625rem 1.5rem;
      min-height: 42px;
      border-radius: 999px;
      font-weight: 600;
      font-size: 0.9375rem;
      border: none;
      box-shadow: 0 10px 25px rgba(79, 70, 229, 0.38);
      transition: background-position 0.25s ease, box-shadow 0.2s ease, transform 0.15s ease;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background-size: 180% 100%;
      background-position: 0% 50%;
    }
    .btn-primary:hover {
      background-position: 100% 50%;
      box-shadow: 0 16px 36px rgba(56, 189, 248, 0.4);
      transform: translateY(-1px);
    }
    .btn-primary:focus-visible {
      outline: none;
      box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.55);
    }
    .btn-primary:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      box-shadow: none;
    }
    .btn-secondary {
      background: rgba(15, 23, 42, 0.02);
      color: var(--text-muted);
      border: 1px solid rgba(148, 163, 184, 0.5);
      padding: 0.625rem 1.25rem;
      min-height: 42px;
      border-radius: 999px;
      font-weight: 600;
      font-size: 0.9375rem;
      transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    .btn-secondary:hover {
      background: rgba(15, 23, 42, 0.06);
      border-color: rgba(129, 140, 248, 0.7);
      color: var(--text-primary);
    }
    .card-hover {
      transition: box-shadow 0.25s ease, transform 0.2s ease;
      cursor: pointer;
    }
    .card-hover:hover {
      box-shadow: 0 18px 38px rgba(15, 23, 42, 0.14);
      transform: translateY(-3px);
    }
    .platform-input {
      background: rgba(15, 23, 42, 0.02);
      border: 1px solid rgba(148, 163, 184, 0.6);
      border-radius: 999px;
      padding: 0.5rem 0.875rem;
      font-size: 0.9375rem;
      color: var(--text-primary);
      transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
    }
    .platform-input::placeholder {
      color: var(--text-soft);
    }
    .platform-input:focus {
      outline: none;
      border-color: var(--primary);
      background-color: #FFFFFF;
      box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.28);
    }
    .text-platform-primary { color: var(--text-primary); }
    .text-platform-muted { color: var(--text-muted); }
    .text-platform-soft { color: var(--text-soft); }
    .title-deco {
      position: relative;
      font-weight: 700;
      letter-spacing: -0.02em;
    }
    .title-deco::after {
      content: '';
      display: block;
      width: 3rem;
      height: 3px;
      margin-top: 0.5rem;
      background-image: linear-gradient(90deg, #6366F1, #22D3EE, #FB7185);
      border-radius: 999px;
    }
    @media (prefers-reduced-motion: reduce) {
      .platform-card,
      .btn-primary,
      .btn-secondary,
      .card-hover,
      .platform-input {
        transition: none;
      }
    }
  </style>
</head>
<body class="text-platform-primary platform-page <%= typeof siteBackground !== 'undefined' && siteBackground ? 'with-bg' : '' %>" style="<% if (typeof siteBackground !== 'undefined' && siteBackground) { var bg = String(siteBackground).replace(/'/g, '\\\'').replace(/</g, ''); %>background-image: url('<%= bg %>'); background-size: cover; background-attachment: fixed;<% } %>">
  <!-- 动漫风渐变光斑装饰，仅用于前台背景，不影响交互 -->
  <div class="pointer-events-none select-none fixed inset-0 -z-10 overflow-hidden">
    <div class="absolute -top-24 -left-10 w-72 h-72 bg-gradient-to-br from-indigo-500/40 via-sky-400/30 to-cyan-300/20 blur-3xl rounded-full"></div>
    <div class="absolute -top-10 right-[-40px] w-64 h-64 bg-gradient-to-tr from-rose-400/40 via-fuchsia-500/30 to-amber-300/20 blur-3xl rounded-full"></div>
    <div class="absolute bottom-[-80px] left-1/2 -translate-x-1/2 w-[520px] h-[260px] bg-gradient-to-t from-indigo-500/30 via-sky-400/15 to-transparent blur-3xl"></div>
  </div>
  <nav class="platform-nav sticky top-0 z-40">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-14">
      <a href="/shop" class="font-semibold text-white text-lg cursor-pointer hover:text-primary-100 transition-colors duration-200">
        <%= typeof siteName !== 'undefined' && siteName ? siteName : '发卡平台' %>
      </a>
      <div class="flex items-center gap-5 text-sm">
        <a href="/shop" class="text-slate-200 hover:text-primary-100 cursor-pointer transition-colors duration-200">首页</a>
        <% if (typeof user !== 'undefined' && user) { %>
          <a href="/shop/orders" class="text-slate-200/90 hover:text-primary-100 cursor-pointer transition-colors duration-200">我的订单</a>
          <% if (user.isAdmin) { %><a href="/admin" class="text-slate-200/90 hover:text-primary-100 cursor-pointer transition-colors duration-200">后台</a><% } %>
          <span class="text-slate-300 text-sm"><%= user.username %></span>
          <a href="/auth/linux-do/logout" class="text-slate-300 hover:text-primary-100 cursor-pointer transition-colors duration-200">退出</a>
        <% } else { %>
          <a href="/shop/login" class="btn-primary text-sm">登录</a>
        <% } %>
      </div>
    </div>
  </nav>
  <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12 pt-10 sm:pt-12 relative z-10">
